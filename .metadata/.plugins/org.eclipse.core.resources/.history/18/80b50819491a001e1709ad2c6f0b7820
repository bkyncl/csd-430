<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert Records Form</title>
<style>
    table {
        border-collapse: collapse;
        width: 35%;
        border: 2px solid #ddd;
    }
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    th {
        background-color: #f2f2f2;
        text-align: center;
    }
    td.label-cell {
        text-align: right;
        font-weight: bold;
    }
    input[type="text"],
    input[type="number"],
    textarea,
    select {
        width: 100%;
        box-sizing: border-box;
    }
    #button-container {
        text-align: center;
        background-color: #f2f2f2;
    }
    #button {
        display: inline-block;
    }
</style>
</head>
<body>
<div>
	<div>
		<h2>Insert a New Plant Into the Garden Database</h2>
		<form action="<%=request.getContextPath()%>/plants?action=insert" method="POST">
		    <table>
		        <tr>
		            <th colspan="3">Enter Plant Information</th>
		        </tr>
		        <tr>
		            <td class="label-cell">
		                <label for="categoryId">Plant Category:</label>
		            </td>
		            <td colspan="2">
		                <select name="categoryId" id="category">
		                    <option value="1">Fruits</option>
		                    <option value="2">Vegetables</option>
		                    <option value="3">Herbs</option>
		                </select>
		            </td>
		        </tr>
		        <tr>
		            <td class="label-cell">
		                <label for="name">Plant Name:</label>
		            </td>
		            <td colspan="2">
		                <input type="text" name="plantName" id="name" required maxlength="50">
		            </td>
		        </tr>
		        <tr>
		            <td class="label-cell">
		                <label for="description">Description:</label>
		            </td>
		            <td colspan="2">
		                <textarea name=plantDescription id="description" maxlength="200"></textarea>
		            </td>
		        </tr>
		        <tr>
		            <td class="label-cell">
		                <label for="quantity">Quantity:</label>
		            </td>
		            <td colspan="2">
		                <input type="number" name="quantity" id="quantity" required pattern="[0-9]+">
		            </td>
		        </tr>
		        <tr>
		            <td colspan="3" id="button-container">
		            	<input type="hidden" name="action" value="result">
		                <input id="button" type="submit" value="Insert New Plant">
		            </td>
		        </tr>
		    </table>
		</form>
	</div>
	<div>
		<!-- Display the list of plants -->
	    <h3>Plants:</h3>
	    <table>
	        <tr>
	            <th>Plant ID</th>
	            <th>Plant Name</th>
	            <th>Plant Description</th>
	            <th>Quantity</th>
	            <th>Plant Category</th>
	        </tr>
	        <c:forEach var="plant" items="${plants}">
	            <tr>
	            	<td>${plant.plantId}</td>
	                <td>${plant.plantName}</td>
	                <td>${plant.plantDescription}</td>
	                <td>${plant.quantity}</td>
	                <td>
	                <c:forEach var="category" items="${categories}">
	                    <c:if test="${category.categoryId eq plant.categoryId}">
	                        ${category.categoryName}
	                    </c:if>
	                </c:forEach>
	            </td>
	            </tr>
	        </c:forEach>
	    </table>
	</div>
</div>
	
<div>
	<h3>Categories:</h3>
	<table>
	    <tr>
	        <th>Category ID</th>
	        <th>Category Name</th>
	        <th>Plant Quantity</th>
	    </tr>
	    <c:forEach var="category" items="${categories}">
	        <tr>
	            <td>${category.categoryId}</td>
	            <td>${category.categoryName}</td>
	            <td>${category.plantCount}</td>
	        </tr>
	    </c:forEach>
	</table>

</div>
</body>
</html>