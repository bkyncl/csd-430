<%-- 
index.jsp
Module 8 assignment
Name: Brittany Kyncl
Date: 7.4.22
Course: CSD430
Form for inserting new plant record into garden database. The form data is sent to
servlet with "insert" action which handles the form submission and uses a Java Bean 'Plant.java' to insert
a new plant record into the plants table. The servlet then retrieves a list of plants and categories from the DataManage
and sets the retrieved data as attributes in the request object. It then forwards the request and response objects back to form.jsp
When from.jsp receives the plants and categories list after form submission it then displays the updated table results
--%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<html>
<head>
	<title>Parsing employees.xml</title>
	<style>th {text-align:left}</style>
</head>
<body>
	<c:import url="employees.xml" var="employeeData"/>
	<x:parse doc="${employeeData}" var="dom"/>
	
	<h2>Displaying All Employees</h2>
	<table border="1">
		<tr>
			<th colspan="4">All Employees in 'employees.xml' File</th>
		</tr>
		<tr>
			 <th>Name</th>
			 <th>Job Title</th>
			 <th>Department</th>
			 <th>Salary</th>
		</tr>
		<x:forEach var="employee" select="$dom/employees/employee">
		<tr>
		  	<td><x:out select="$employee/name"/></td>
			<td><x:out select="$employee/jobTitle"/></td>
			<td><x:out select="$employee/department"/></td>
			<td><x:out select="$employee/salary"/></td>
			
		</x:forEach>
	</table>
	
    
	<h2>Applying Conditional Logic with JSTL Functions to Display XML Data</h2>
	<table border="1">
	    <tr>
	        <th colspan="4">Employees with >50000 Salary in Green <=50000 Salary in Red</th>
	    </tr>
	    <tr>
	        <th>Name</th>
	        <th>Job Title</th>
	        <th>Department</th>
	        <th>Salary</th>
	    </tr>
	    <x:forEach var="employee" select="$dom/employees/employee">
	        <x:choose>
	            <x:when select="$employee/salary>50000">
	                <tr style="background-color: #BDFCB1;">
	                    <td><x:out select="$employee/name"/></td>
	                    <td><x:out select="$employee/jobTitle"/></td>
	                    <td><x:out select="$employee/department"/></td>
	                    <td><x:out select="$employee/salary"/></td>
	                </tr>
	            </x:when>
	            <x:when select="$employee/salary<=50000">
	                <tr style="background-color: #FFC0C0;">
	                    <td><x:out select="$employee/name"/></td>
	                    <td><x:out select="$employee/jobTitle"/></td>
	                    <td><x:out select="$employee/department"/></td>
	                    <td><x:out select="$employee/salary"/></td>
	                </tr>
	            </x:when>
	            <x:otherwise>
	                <tr>
	                    <td><x:out select="$employee/name"/></td>
	                    <td><x:out select="$employee/jobTitle"/></td>
	                    <td><x:out select="$employee/department"/></td>
	                    <td><x:out select="$employee/salary"/></td>
	                </tr>
	            </x:otherwise>
	        </x:choose>
	    </x:forEach>
	</table>
    <br>
    <table border="1">
	    <tr>
	        <th colspan="4">Employees with Department = 'Engineering'</th>
	    </tr>
	    <tr>
	        <th>Name</th>
	        <th>Job Title</th>
	        <th>Department</th>
	        <th>Salary</th>
	    </tr>
	    <x:forEach var="employee" select="$dom/employees/employee">
	        <x:choose>
	            <x:when select="$employee/department='Engineering'">
	                <tr>
	                    <td><x:out select="$employee/name"/></td>
	                    <td><x:out select="$employee/jobTitle"/></td>
	                    <td><x:out select="$employee/department"/></td>
	                    <td><x:out select="$employee/salary"/></td>
	                </tr>
	            </x:when>
	        </x:choose>
	    </x:forEach>
	</table>
	<br>
	<table border="1">
	    <tr>
	        <th colspan="4">Employees with Department = 'Finance' or 'Marketing'</th>
	    </tr>
	    <tr>
	        <th>Name</th>
	        <th>Job Title</th>
	        <th>Department</th>
	        <th>Salary</th>
	    </tr>
	    <x:forEach var="employee" select="$dom/employees/employee">
	        <x:choose>
	            <x:when select="$employee/department='Finance' or $employee/department='Marketing'">
	                <tr>
	                    <td><x:out select="$employee/name"/></td>
	                    <td><x:out select="$employee/jobTitle"/></td>
	                    <td><x:out select="$employee/department"/></td>
	                    <td><x:out select="$employee/salary"/></td>
	                </tr>
	            </x:when>
	        </x:choose>
	    </x:forEach>
	</table>
	
</body>
</html>